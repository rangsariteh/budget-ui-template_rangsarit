import{a as we,b as Z,c as ve,d as be,e as X,f as _e,g as Y,h as ye,i as M,j as m}from"./chunk-FLDGTLSH.js";import{a as L}from"./chunk-QXQOGWH7.js";import{D as O,E as V,a as $,b as le,c as de,d as pe,e as v,ea as G,f as I,g as S,h as D,ha as Ae,i as P,l as fe,m as he,mb as ke,q as ge,qb as Ee,r as K,ra as H,s as b,sb as Te,t as W,u as me,v as C,w as g,x as d,y as _}from"./chunk-6EXSEE2M.js";import{a as q}from"./chunk-FE3DY6WF.js";import{g as E}from"./chunk-PM2M367S.js";var Ze="firebase",Xe="10.12.5";M(Ze,Xe,"app");var Ye=(e,r)=>{let t=r?[r]:ye(),n=[];return t.forEach(o=>{o.container.getProvider(e).instances.forEach(a=>{n.includes(a)||n.push(a)})}),n},N=class{constructor(){return Ye(Je)}},Je="app-check";function J(){}var U=class{zone;delegate;constructor(r,t=pe){this.zone=r,this.delegate=t}now(){return this.delegate.now()}schedule(r,t,n){let o=this.zone,i=function(a){o.runGuarded(()=>{r.apply(this,[a])})};return this.delegate.schedule(i,t,n)}},Q=class{zone;task=null;constructor(r){this.zone=r}call(r,t){let n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",J,{},J,J)),t.pipe(me({next:n,complete:n,error:n})).subscribe(r).add(n)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Pe=(()=>{class e{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new U(Zone.current)),this.insideAngular=t.run(()=>new U(Zone.current,de)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(n){return new(n||e)(d(O))};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Qe(){let e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return e}function Ce(e){return et(Qe())(e)}function et(e){return function(t){return t=t.lift(new Q(e.ngZone)),t.pipe(I(e.outsideAngular),v(e.insideAngular))}}var nt="firebase",rt="10.12.5";m.registerVersion(nt,rt,"app-compat");var ot=["ngOnDestroy"],Se=(e,r,t,n={})=>new Proxy(e,{get:(o,i)=>t.runOutsideAngular(()=>{if(e[i])return n?.spy?.get&&n.spy.get(i,e[i]),e[i];if(ot.indexOf(i)>-1)return()=>{};let a=r.toPromise().then(c=>{let s=c?.[i];return typeof s=="function"?s.bind(c):s?.then?s.then(l=>t.run(()=>l)):t.run(()=>s)});return new Proxy(()=>{},{get:(c,s)=>a[s],apply:(c,s,l)=>a.then(h=>{let y=h?.(...l);return n?.spy?.apply&&n.spy.apply(i,l,y),y})})})});var ee=class{constructor(r){return r}},De=new g("angularfire2.app.options"),Oe=new g("angularfire2.app.name");function Me(e,r,t){let n=typeof t=="string"&&t||"[DEFAULT]",o=typeof t=="object"&&t||{};o.name=o.name||n;let a=m.apps.filter(c=>c&&c.name===o.name)[0]||r.runOutsideAngular(()=>m.initializeApp(e,o));try{if(JSON.stringify(e)!==JSON.stringify(a.options)){let c=!!module.hot;it("error",`${a.name} Firebase App already initialized with different options${c?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new ee(a)}var it=(e,...r)=>{G()&&typeof console<"u"&&console[e](...r)};function Ne(e,r,t,n,o){let[,i,a]=globalThis.\u0275AngularfireInstanceCache.find(c=>c[0]===e)||[];if(i)return st(o,a)||(Re("error",`${r} was already initialized on the ${t} Firebase App with different settings.${at?" You may need to reload as Firebase is not HMR aware.":""}`),Re("warn",{is:o,was:a})),i;{let c=n();return globalThis.\u0275AngularfireInstanceCache.push([e,c,o]),c}}function st(e,r){try{return e.toString()===r.toString()}catch{return e===r}}var at=typeof module<"u"&&!!module.hot,Re=(e,...r)=>{G()&&typeof console<"u"&&console[e](...r)};globalThis.\u0275AngularfireInstanceCache||=[];var ct=new Map,ut={activated:!1,tokenObservers:[]},lt={initialized:!1,enabled:!1};function f(e){return ct.get(e)||Object.assign({},ut)}function He(){return lt}var dt="https://content-firebaseappcheck.googleapis.com/v1";var pt="exchangeDebugToken",xe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},An=24*60*60*1e3;var ne=class{constructor(r,t,n,o,i){if(this.operation=r,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=o,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=o,o>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(r){return E(this,null,function*(){this.stop();try{this.pending=new Z,this.pending.promise.catch(t=>{}),yield ft(this.getNextRun(r)),this.pending.resolve(),yield this.pending.promise,this.pending=new Z,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(r){if(r)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function ft(e){return new Promise(r=>{setTimeout(r,e)})}var ht={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},T=new be("appCheck","AppCheck",ht);function Le(e){if(!f(e).activated)throw T.create("use-before-activation",{appName:e.name})}function Ue(n,o){return E(this,arguments,function*({url:e,body:r},t){let i={"Content-Type":"application/json"},a=t.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&(i["X-Firebase-Client"]=p)}let c={method:"POST",body:JSON.stringify(r),headers:i},s;try{s=yield fetch(e,c)}catch(p){throw T.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw T.create("fetch-status-error",{httpStatus:s.status});let l;try{l=yield s.json()}catch(p){throw T.create("fetch-parse-error",{originalErrorMessage:p?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw T.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let y=Number(h[1])*1e3,j=Date.now();return{token:l.token,expireTimeMillis:j+y,issuedAtTimeMillis:j}})}function ze(e,r){let{projectId:t,appId:n,apiKey:o}=e.options;return{url:`${dt}/projects/${t}/apps/${n}:${pt}?key=${o}`,body:{debug_token:r}}}var gt="firebase-app-check-database",mt=1,re="firebase-app-check-store";var z=null;function At(){return z||(z=new Promise((e,r)=>{try{let t=indexedDB.open(gt,mt);t.onsuccess=n=>{e(n.target.result)},t.onerror=n=>{var o;r(T.create("storage-open",{originalErrorMessage:(o=n.target.error)===null||o===void 0?void 0:o.message}))},t.onupgradeneeded=n=>{let o=n.target.result;switch(n.oldVersion){case 0:o.createObjectStore(re,{keyPath:"compositeKey"})}}}catch(t){r(T.create("storage-open",{originalErrorMessage:t?.message}))}}),z)}function kt(e,r){return Et(Tt(e),r)}function Et(e,r){return E(this,null,function*(){let n=(yield At()).transaction(re,"readwrite"),i=n.objectStore(re).put({compositeKey:e,value:r});return new Promise((a,c)=>{i.onsuccess=s=>{a()},n.onerror=s=>{var l;c(T.create("storage-set",{originalErrorMessage:(l=s.target.error)===null||l===void 0?void 0:l.message}))}})})}function Tt(e){return`${e.options.appId}-${e.name}`}var oe=new _e("@firebase/app-check");function te(e,r){return ve()?kt(e,r).catch(t=>{oe.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Be(){return He().enabled}function Ke(){return E(this,null,function*(){let e=He();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var wt={error:"UNKNOWN_ERROR"};function vt(e){return we.encodeString(JSON.stringify(e),!1)}function ie(e,r=!1){return E(this,null,function*(){let t=e.app;Le(t);let n=f(t),o=n.token,i;if(o&&!x(o)&&(n.token=void 0,o=void 0),!o){let s=yield n.cachedTokenPromise;s&&(x(s)?o=s:yield te(t,void 0))}if(!r&&o&&x(o))return{token:o.token};let a=!1;if(Be()){n.exchangeTokenPromise||(n.exchangeTokenPromise=Ue(ze(t,yield Ke()),e.heartbeatServiceProvider).finally(()=>{n.exchangeTokenPromise=void 0}),a=!0);let s=yield n.exchangeTokenPromise;return yield te(t,s),n.token=s,{token:s.token}}try{n.exchangeTokenPromise||(n.exchangeTokenPromise=n.provider.getToken().finally(()=>{n.exchangeTokenPromise=void 0}),a=!0),o=yield f(t).exchangeTokenPromise}catch(s){s.code==="appCheck/throttled"?oe.warn(s.message):oe.error(s),i=s}let c;return o?i?x(o)?c={token:o.token,internalError:i}:c=je(i):(c={token:o.token},n.token=o,yield te(t,o)):c=je(i),a&&It(t,c),c})}function bt(e){return E(this,null,function*(){let r=e.app;Le(r);let{provider:t}=f(r);if(Be()){let n=yield Ke(),{token:o}=yield Ue(ze(r,n),e.heartbeatServiceProvider);return{token:o}}else{let{token:n}=yield t.getToken();return{token:n}}})}function _t(e,r,t,n){let{app:o}=e,i=f(o),a={next:t,error:n,type:r};if(i.tokenObservers=[...i.tokenObservers,a],i.token&&x(i.token)){let c=i.token;Promise.resolve().then(()=>{t({token:c.token}),Fe(e)}).catch(()=>{})}i.cachedTokenPromise.then(()=>Fe(e))}function We(e,r){let t=f(e),n=t.tokenObservers.filter(o=>o.next!==r);n.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=n}function Fe(e){let{app:r}=e,t=f(r),n=t.tokenRefresher;n||(n=yt(e),t.tokenRefresher=n),!n.isRunning()&&t.isTokenAutoRefreshEnabled&&n.start()}function yt(e){let{app:r}=e;return new ne(()=>E(this,null,function*(){let t=f(r),n;if(t.token?n=yield ie(e,!0):n=yield ie(e),n.error)throw n.error;if(n.internalError)throw n.internalError}),()=>!0,()=>{let t=f(r);if(t.token){let n=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,o=t.token.expireTimeMillis-5*60*1e3;return n=Math.min(n,o),Math.max(0,n-Date.now())}else return 0},xe.RETRIAL_MIN_WAIT,xe.RETRIAL_MAX_WAIT)}function It(e,r){let t=f(e).tokenObservers;for(let n of t)try{n.type==="EXTERNAL"&&r.error!=null?n.error(r.error):n.next(r)}catch{}}function x(e){return e.expireTimeMillis-Date.now()>0}function je(e){return{token:vt(wt),error:e}}var se=class{constructor(r,t){this.app=r,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:r}=f(this.app);for(let t of r)We(this.app,t.next);return Promise.resolve()}};function Pt(e,r){return new se(e,r)}function Ct(e){return{getToken:r=>ie(e,r),getLimitedUseToken:()=>bt(e),addTokenListener:r=>_t(e,"INTERNAL",r),removeTokenListener:r=>We(e.app,r)}}var Rt="@firebase/app-check",St="0.8.7";var Dt="app-check",$e="app-check-internal";function Ot(){Y(new X(Dt,e=>{let r=e.getProvider("app").getImmediate(),t=e.getProvider("heartbeat");return Pt(r,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,t)=>{e.getProvider($e).initialize()})),Y(new X($e,e=>{let r=e.getProvider("app-check").getImmediate();return Ct(r)},"PUBLIC").setInstantiationMode("EXPLICIT")),M(Rt,St)}Ot();var Mt=["localhost","0.0.0.0","127.0.0.1"],Rn=typeof window<"u"&&Mt.includes(window.location.hostname);var xt=new g("angularfire2.auth.use-emulator"),Ft=new g("angularfire2.auth.settings"),jt=new g("angularfire2.auth.tenant-id"),$t=new g("angularfire2.auth.langugage-code"),Ht=new g("angularfire2.auth.use-device-language"),Lt=new g("angularfire.auth.persistence"),Ut=(e,r,t,n,o,i,a,c)=>Ne(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{let s=r.runOutsideAngular(()=>e.auth());if(t&&s.useEmulator(...t),n&&(s.tenantId=n),s.languageCode=o,i&&s.useDeviceLanguage(),a)for(let[l,h]of Object.entries(a))s.settings[l]=h;return c&&s.setPersistence(c),s},[t,n,o,i,a,c]),Ve=(()=>{class e{authState;idToken;user;idTokenResult;credential;constructor(t,n,o,i,a,c,s,l,h,y,j,p){let ce=new le,R=D(void 0).pipe(v(a.outsideAngular),b(()=>i.runOutsideAngular(()=>import("./chunk-2X4MNKO4.js"))),P(()=>Me(t,i,n)),P(k=>Ut(k,i,c,l,h,y,s,j)),K({bufferSize:1,refCount:!1}));if(Ae(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=D(null);else{R.pipe(ge()).subscribe();let k=R.pipe(b(u=>u.getRedirectResult().then(A=>A,()=>null)),Ce,K({bufferSize:1,refCount:!1})),ue=R.pipe(b(u=>new $(A=>({unsubscribe:i.runOutsideAngular(()=>u.onAuthStateChanged(w=>A.next(w),w=>A.error(w),()=>A.complete()))})))),B=R.pipe(b(u=>new $(A=>({unsubscribe:i.runOutsideAngular(()=>u.onIdTokenChanged(w=>A.next(w),w=>A.error(w),()=>A.complete()))}))));this.authState=k.pipe(W(ue),I(a.outsideAngular),v(a.insideAngular)),this.user=k.pipe(W(B),I(a.outsideAngular),v(a.insideAngular)),this.idToken=this.user.pipe(b(u=>u?S(u.getIdToken()):D(null))),this.idTokenResult=this.user.pipe(b(u=>u?S(u.getIdTokenResult()):D(null))),this.credential=fe(k,ce,this.authState.pipe(he(u=>!u))).pipe(P(u=>u?.user?u:null),I(a.outsideAngular),v(a.insideAngular))}return Se(this,R,i,{spy:{apply:(k,ue,B)=>{(k.startsWith("signIn")||k.startsWith("createUser"))&&B.then(u=>ce.next(u))}}})}static \u0275fac=function(n){return new(n||e)(d(De),d(Oe,8),d(V),d(O),d(Pe),d(xt,8),d(Ft,8),d(jt,8),d($t,8),d(Ht,8),d(Lt,8),d(N,8))};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"any"})}return e})();var ae=(e,r)=>{let t=_(Ge),n=_(H);return t.currentUser().pipe(P(o=>(o||n.navigate([`/${F}`],r.url!=="/"?{queryParams:{returnUrl:r.url}}:{}),!!o)))};var F="login",qe=L,zt=[{path:F,loadComponent:()=>import("./chunk-SACCVA77.js")},{path:L,loadChildren:()=>import("./chunk-SHXIVGOD.js"),canActivate:[ae]},{path:q,loadChildren:()=>import("./chunk-QJZMKL56.js"),canActivate:[ae]},{path:"",redirectTo:qe,pathMatch:"full"},{path:L,loadChildren:()=>import("./chunk-SHXIVGOD.js")},{path:q,loadChildren:()=>import("./chunk-QJZMKL56.js")},{path:"**",redirectTo:qe}],or=zt;var Ge=(()=>{let r=class r{constructor(){this.fireauth=_(Ve),this.toast=_(ke),this.router=_(H),this.currentUser=()=>this.fireauth.user,this.loginWithGithub=n=>this.login(new m.auth.GithubAuthProvider,n),this.loginWithGoogle=n=>this.login(new m.auth.GoogleAuthProvider,n),this.logout=()=>this.fireauth.signOut().then(()=>this.router.navigate([F])),Ee({alertCircle:Te})}login(n,o){S(this.fireauth.signInWithPopup(n)).subscribe({next:o||(()=>{}),error:i=>this.handleLoginError(i)})}handleLoginError(n){n.code!=="auth/cancelled-popup-request"&&(console.error(n),this.toast.create({message:n.message,duration:5e3,position:"bottom",color:"danger",icon:"alert-circle"}).then(o=>o.present()))}};r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=C({token:r,factory:r.\u0275fac,providedIn:"root"});let e=r;return e})();export{De as a,Ve as b,Ge as c,or as d};
